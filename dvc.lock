schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling.csv
      md5: a0d373e8bbc1c649996e16e22dd118e3
      size: 684858
    - path: stages/data_split.py
      md5: 519fbe22a8ce712999f28010f3c56fe6
      size: 1606
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 10
          model_dir: model/
        data_split:
          test_size: 0.28
    outs:
    - path: data/X_test.pkl
      md5: c506d25c5749b81b2f82d5c54889b266
      size: 208313
    - path: data/X_train.pkl
      md5: 9fda500eb27d45a083d5b6ed58750efb
      size: 533775
    - path: data/y_test.pkl
      md5: 77fbd56c7edc29c7bc28586f5c5bf781
      size: 67846
    - path: data/y_train.pkl
      md5: 1435c128c6990d49861153e3feeb3ca8
      size: 173398
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      md5: 9fda500eb27d45a083d5b6ed58750efb
      size: 533775
    - path: data/y_train.pkl
      md5: 1435c128c6990d49861153e3feeb3ca8
      size: 173398
    - path: stages/train.py
      md5: d54e4eaf7ad9f7c5bb9a740d48a2f9d2
      size: 2536
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 10
          model_dir: model/
        train:
          model_type: randomforest
          params:
            n_estimators: 500
            max_depth: 5
    outs:
    - path: model//clf-model
      md5: 270c0fec145392f807f76e97c1d65ca7
      size: 2082518
    - path: model//clf-model.mlem
      md5: a3dbc4993780798c24063593247fe561
      size: 1994
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      md5: c506d25c5749b81b2f82d5c54889b266
      size: 208313
    - path: data/y_test.pkl
      md5: 77fbd56c7edc29c7bc28586f5c5bf781
      size: 67846
    - path: model//clf-model
      md5: 270c0fec145392f807f76e97c1d65ca7
      size: 2082518
    - path: model//clf-model.mlem
      md5: a3dbc4993780798c24063593247fe561
      size: 1994
    - path: stages/eval.py
      md5: 17badaa85160eacd8dccf45d4861fc3b
      size: 2762
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 10
          model_dir: model/
        data_split:
          test_size: 0.28
        train:
          model_type: randomforest
          params:
            n_estimators: 500
            max_depth: 5
    outs:
    - path: eval_plots/cm.png
      md5: 5d5e640b1acb0cb17956b937ffd01da9
      size: 10534
    - path: eval_plots/plots/sklearn/roc.json
      md5: 0432c5bc91f58126c97617a0e01501f2
      size: 90853
    - path: feat_imp.csv
      md5: 0d6e7fbdd00e24446bbe3ff1d6e7bea7
      size: 306
    - path: metrics.json
      md5: 5720232d3f652a6020f0073103f61706
      size: 97
    - path: models/perm_imp.joblib
      md5: b358f752b133315386d6797074a245ce
      size: 2080267
