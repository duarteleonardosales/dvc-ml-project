schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling.csv
      md5: a0d373e8bbc1c649996e16e22dd118e3
      size: 684858
    - path: stages/data_split.py
      md5: 519fbe22a8ce712999f28010f3c56fe6
      size: 1606
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.1
    outs:
    - path: data/X_test.pkl
      md5: 0b8b0710f8859194b2aed4b7230689cd
      size: 75026
    - path: data/X_train.pkl
      md5: 025e9b771b2c31f1fb0c7367262d2b69
      size: 667060
    - path: data/y_test.pkl
      md5: 59a3a75903762ce0f70192f22aa80813
      size: 24613
    - path: data/y_train.pkl
      md5: 488d90722ca37ca3afb611de6197741f
      size: 216640
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      md5: 025e9b771b2c31f1fb0c7367262d2b69
      size: 667060
    - path: data/y_train.pkl
      md5: 488d90722ca37ca3afb611de6197741f
      size: 216640
    - path: stages/train.py
      md5: d54e4eaf7ad9f7c5bb9a740d48a2f9d2
      size: 2536
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        train:
          model_type: randomforest
          params:
            n_estimators: 150
            max_depth: 20
    outs:
    - path: model//clf-model
      md5: acddbccdf8e567f6f726665bb47960cb
      size: 24762468
    - path: model//clf-model.mlem
      md5: 90c006775094463ac92832432493ec95
      size: 1995
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      md5: 0b8b0710f8859194b2aed4b7230689cd
      size: 75026
    - path: data/y_test.pkl
      md5: 59a3a75903762ce0f70192f22aa80813
      size: 24613
    - path: model//clf-model
      md5: acddbccdf8e567f6f726665bb47960cb
      size: 24762468
    - path: model//clf-model.mlem
      md5: 90c006775094463ac92832432493ec95
      size: 1995
    - path: stages/eval.py
      md5: 17badaa85160eacd8dccf45d4861fc3b
      size: 2762
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.1
        train:
          model_type: randomforest
          params:
            n_estimators: 150
            max_depth: 20
    outs:
    - path: eval_plots/cm.png
      md5: 790d3fd8c2f927eea5b8c9b1fb939f43
      size: 10239
    - path: eval_plots/plots/sklearn/roc.json
      md5: 2039ed481abce83704ba53d0b8a387a1
      size: 38364
    - path: feat_imp.csv
      md5: a9a2427d68bc68ef90aff865aed2dc68
      size: 299
    - path: metrics.json
      md5: 33f95cbdf42c70c87d45474be4284801
      size: 96
    - path: models/perm_imp.joblib
      md5: 8b5b5c8521945531f120e78c0718bbb4
      size: 24761147
